<app-header></app-header>
<div class="container" *ngIf="currentUser">
  <header class="jumbotron">
    <h1>
      <strong>Profile: </strong>
    </h1>
    <h2>
      Username: <strong>{{ currentUser.username }}</strong>
    </h2>
    <h2>
      Email: <strong>{{ currentUser.email }}</strong>
    </h2>
  </header>

  <div class="container-menus">
  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          See JWT Token
        </mat-panel-title>
        <mat-panel-description>
          Warning: Don't share your JWT Token with anyone!
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p>{{currentUser.accessToken}}</p>
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          My Roles
        </mat-panel-title>
        <mat-panel-description>
          View your roles.
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p *ngFor="let role of currentUser.roles">
      {{ role }}</p>
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true"
    (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          My Reviews
        </mat-panel-title>
        <mat-panel-description>
          View your product reviews.
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div *ngIf="reviewLength === 0">You have no reviews.</div>
      <div *ngIf="reviewLength !== 0">
        <div *ngFor="let review of reviews" >
          <app-review-item  [review]="review" [productId]="review.product.id"></app-review-item>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <section *ngIf="orderLength !== 0" class="container">
    <h2>My Orders: </h2>
    <div *ngFor="let order of orders" class="listing">
      <app-order-item [order]="order"></app-order-item>
    </div>
  </section>

  <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false" class="orders">
      <mat-expansion-panel-header>
        <mat-panel-title>
          My Orders
        </mat-panel-title>
        <mat-panel-description>
          View your active orders.
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div *ngIf="orderLength === 0">You have no orders.</div>
      <div *ngIf="orderLength !== 0">
        <div *ngFor="let order of orders" >
          <app-order-item [order]="order"></app-order-item>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  </div>
</div>

<app-footer></app-footer>
